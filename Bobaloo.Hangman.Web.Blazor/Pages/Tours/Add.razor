@page "/tours/add"
@using Bobaloo.Hangman.Data.Core
@using Bobaloo.Hangman.Data
@inject IRepository<HangmanUnitOfWork, Tour, Guid> TourRepository
@inject NavigationManager NavManager
<PageTitle>Bobaloo's Hangman Tours Adminstration Portal</PageTitle>

<EditForm Model="tour" OnValidSubmit="AddTour">
    <DataAnnotationsValidator />

    <div class="form-group">
        <label for="Name">Name</label>
        <InputText id="Name" @bind-Value="tour.Name" />
        <ValidationMessage For="@(() => tour.Name)" />
    </div>
    <div class="form-group">
        <label for="Name">Name</label>
        <InputTextArea id="Name" @bind-Value="tour.Description" />
        <ValidationMessage For="@(() => tour.Description)" />
    </div>
    <div class="form-group">
        <label for="Price">Price</label>
        <InputNumber id="Price" @bind-Value="tour.Price" />
        <ValidationMessage For="@(() => tour.Price)" />
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
</EditForm>

@code{
    Tour tour = new Tour();
    private async Task AddTour()
    {
        await TourRepository.Add(tour);
        NavManager.NavigateTo($"/tours/{tour.TourId}");
    }
}
